box: debian:testing
build:
  steps:
    - script:
        name: "install dependencies"
        code: |
          apt-get  update  --yes
          apt-get  install --yes git libssl-dev luajit luarocks
          luarocks install luasec
          luarocks make cosy-editor-dev-master-1.rockspec
          luarocks make cosy-editor-master-1.rockspec
    - script:
        name: "check and test"
        code: |
          cosy-check-editor
  after-steps:
    - script:
        name: "export to coveralls"
        code: |
          ./bin/coveralls
deploy:
  luarocks:
    - script:
        name: "upload to luarocks"
        code: |
          ./bin/upload
